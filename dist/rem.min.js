!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Rem=t()}(this,function(){"use strict";var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();return function(){function i(n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),i.instance)return i.instance;this.config={},this.tId={};var o=this,r={designWidth:750,maxWidth:500,ratio:100,dpr:window.devicePixelRatio};if(n&&"object"===(void 0===n?"undefined":t(n)))this.config=e(r,n);else{if(n)throw"new Rem() 参数错误, 请检查.";this.config=e(r,this.metaParse())}this.setViewport(this.config),this.setFontSize(this.config),window.addEventListener("resize",function(){clearTimeout(o.tId),o.tId=setTimeout(function(){o.setFontSize(o.config)},100)},!1),i.instance=this}return n(i,[{key:"metaParse",value:function(){var e={},t=document.querySelector('meta[name="rem"]');if(!t)return e;var n=t.getAttribute("content").split(",");if(!n.length)throw"meta 标签设置错误.";return n.map(function(t){var n=t.split("=").map(function(e){return e.replace(/^\s+|\s+$/g,"")});n[0]=n[0].replace(/\-+(\w{1})/,function(e,t){return t.toUpperCase()}),e[n[0]]=n[1]}),e}},{key:"setViewport",value:function(e){var t=document.querySelector('meta[name="viewport"]'),n=e.dpr,i=void 0===n?1:n,o="width=device-width, initial-scale="+1/i+", minimum-scale="+1/i+", maximum-scale="+1/i+", user-scalable=no";t?t.setAttribute("content",o):((t=document.createElement("meta")).setAttribute("name","viewport"),t.setAttribute("content",o),document.head.appendChild(t))}},{key:"setFontSize",value:function(e){var t=document.documentElement.clientWidth||window.clientWidth,n=e.designWidth,i=e.ratio,o=e.maxWidth,r=e.dpr;t=t>o*r?o*r:t,document.documentElement.style.fontSize=t*i/n+"px"}},{key:"px2rem",value:function(e){return(e=e.toString().replace("px",""))/this.config.ratio+"rem"}},{key:"rem2px",value:function(e){return(e=e.toString().replace("rem",""))*document.documentElement.style.fontSize.replace("px","")+"px"}}]),i}()});
